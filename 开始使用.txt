# Home Assistant Docker éƒ¨ç½²æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ3 æ­¥å®Œæˆï¼‰

### ç¬¬ 1 æ­¥ï¼šå®‰è£… Docker Desktop

æ–¹æ³• 1ï¼šä»å®˜ç½‘ä¸‹è½½ï¼ˆæ¨èï¼‰
è®¿é—®ï¼šhttps://www.docker.com/products/docker-desktop
ä¸‹è½½å¹¶å®‰è£… Docker Desktop

æ–¹æ³• 2ï¼šä½¿ç”¨å‘½ä»¤è¡Œä¸‹è½½
åœ¨ç»ˆç«¯æ‰§è¡Œï¼š
```
# Apple Silicon (M1/M2/M3)
curl -L -o ~/Downloads/Docker.dmg https://desktop.docker.com/mac/main/arm64/Docker.dmg
open ~/Downloads/Docker.dmg

# ç„¶åå°† Docker æ‹–åˆ°åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹
```

å®‰è£…å®Œæˆåï¼Œå¯åŠ¨ Docker Desktop åº”ç”¨ï¼ˆåœ¨åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹ä¸­ï¼‰ã€‚

### ç¬¬ 2 æ­¥ï¼šä¸€é”®éƒ¨ç½²

åœ¨ç»ˆç«¯æ‰§è¡Œï¼š
```
./deploy.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰é…ç½®ï¼Œå¤§çº¦éœ€è¦ 10-15 åˆ†é’Ÿã€‚

### ç¬¬ 3 æ­¥ï¼šè®¿é—®

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
```
http://localhost:8123
```

é¦–æ¬¡è®¿é—®éœ€è¦åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ã€‚

## âœ… å®Œæˆï¼

ç°åœ¨ä½ å·²ç»æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ Home Assistant ç³»ç»Ÿï¼Œæ”¯æŒï¼š
- âœ… HomeKitï¼ˆå¯ä»¥åœ¨ iPhone å®¶åº­ app ä¸­ä½¿ç”¨ï¼‰
- âœ… ç±³å®¶è®¾å¤‡
- âœ… æ‰€æœ‰å®˜æ–¹é›†æˆ

## ğŸ“± é…ç½® HomeKit

âš ï¸ ç”±äº macOS Docker é™åˆ¶ï¼ŒHomeKit éœ€è¦é¢å¤–é…ç½®ã€‚

æ¨èæ–¹æ¡ˆï¼š
1. Home Assistant Cloudï¼ˆä»˜è´¹ï¼Œæœ€ç®€å•ï¼‰
2. Homebridge æ¡¥æ¥ï¼ˆå…è´¹ï¼Œéœ€é…ç½®ï¼‰

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼šHOMEKIT_SUPPORT.md

## ğŸ¡ é…ç½®ç±³å®¶ï¼ˆæ¨èä½¿ç”¨ HACS æ–¹å¼ï¼‰

### å¿«é€Ÿæ­¥éª¤ï¼š

**ç¬¬ä¸€æ­¥ï¼šå®‰è£… HACS**
```bash
docker exec -it homeassistant bash
wget -O - https://get.hacs.xyz | bash -
exit
docker-compose restart homeassistant
```

**ç¬¬äºŒæ­¥ï¼šé…ç½® HACS**
1. è®¿é—® http://localhost:8123
2. è¿›å…¥"è®¾ç½®" > "è®¾å¤‡ä¸æœåŠ¡"
3. é…ç½® HACSï¼ˆéœ€è¦ GitHub è´¦å·æˆæƒï¼‰

**ç¬¬ä¸‰æ­¥ï¼šå®‰è£… Xiaomi Home**
1. æ‰“å¼€ HACS
2. æœç´¢å¹¶ä¸‹è½½ "Xiaomi Home"
3. é‡å¯ Home Assistant

**ç¬¬å››æ­¥ï¼šæ·»åŠ è®¾å¤‡**
1. è¿›å…¥"è®¾ç½®" > "è®¾å¤‡ä¸æœåŠ¡"
2. æ·»åŠ  "Xiaomi Home" é›†æˆ
3. é€‰æ‹©æ‰«ç ç™»å½•ï¼ˆæ¨èï¼‰æˆ–è´¦å·å¯†ç ç™»å½•
4. ç­‰å¾…è®¾å¤‡å‘ç°

âš ï¸ **é‡è¦æç¤º**ï¼š
- å¦‚æœè·³è½¬çš„ç½‘å€åŒ…å« homeassistant.localï¼Œè¯·æ‰‹åŠ¨æ”¹ä¸º localhost
- æ¨èä½¿ç”¨æ‰«ç ç™»å½•ï¼Œé¿å…æœåŠ¡å™¨åŒºåŸŸé€‰æ‹©é—®é¢˜
- è¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹ï¼šdocs/XIAOMI_SETUP.md

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

å¯åŠ¨æœåŠ¡ï¼š
```
docker-compose up -d
```

åœæ­¢æœåŠ¡ï¼š
```
docker-compose down
```

æŸ¥çœ‹æ—¥å¿—ï¼š
```
docker-compose logs -f
```

æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š
```
docker-compose pull
docker-compose up -d
```

## ğŸ“¦ å¤‡ä»½å’Œæ¢å¤

åˆ›å»ºå¤‡ä»½ï¼š
```
./scripts/backup-homeassistant.sh
```

æ¢å¤å¤‡ä»½ï¼š
```
./scripts/restore-homeassistant.sh ~/homeassistant-backups/ha_backup_XXXXXX.tar.gz
```

## ğŸ”„ ä»æ—§çš„ Core å®‰è£…è¿ç§»

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨ Python è™šæ‹Ÿç¯å¢ƒå®‰è£…çš„ Home Assistant Coreï¼š

1. å¤‡ä»½æ—§é…ç½®ï¼š
```
./scripts/backup-homeassistant.sh
```

2. åœæ­¢æ—§æœåŠ¡ï¼š
```
launchctl stop com.homeassistant.server
launchctl unload ~/Library/LaunchAgents/com.homeassistant.server.plist
```

3. éƒ¨ç½² Docker ç‰ˆæœ¬ï¼š
```
./deploy.sh
```

4. æ¢å¤é…ç½®ï¼š
```
docker-compose down
./scripts/restore-homeassistant.sh ~/homeassistant-backups/ha_backup_XXXXXX.tar.gz
docker-compose up -d
```

## â“ é‡åˆ°é—®é¢˜ï¼Ÿ

æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š
- README.md - å®Œæ•´ä½¿ç”¨è¯´æ˜
- docs/HOMEKIT_SETUP.md - HomeKit è¯¦ç»†é…ç½®
- docs/XIAOMI_SETUP.md - ç±³å®¶è¯¦ç»†é…ç½®
- docs/TROUBLESHOOTING.md - å¸¸è§é—®é¢˜è§£å†³

æŸ¥çœ‹æ—¥å¿—ï¼š
```
docker-compose logs -f homeassistant
```

## ğŸ“ è·å–å¸®åŠ©

- Home Assistant å®˜æ–¹æ–‡æ¡£ï¼šhttps://www.home-assistant.io/docs/
- ä¸­æ–‡ç¤¾åŒºè®ºå›ï¼šhttps://bbs.hassbian.com/
- å®˜æ–¹ç¤¾åŒºï¼šhttps://community.home-assistant.io/

---

**å¿«é€Ÿå¼€å§‹**: ./deploy.sh
**è®¿é—®åœ°å€**: http://localhost:8123
**æ”¯æŒ HomeKit**: âœ…
**æ”¯æŒç±³å®¶**: âœ…
